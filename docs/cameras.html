---

title: OpenHSI Camera Implementations


keywords: fastai
sidebar: home_sidebar

summary: "Hardware cameras"
description: "Hardware cameras"
nb_path: "02_cameras.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_cameras.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/Users/eway/.pyenv/versions/3.8.3/lib/python3.8/site-packages/pandas/compat/__init__.py:97: UserWarning: Could not import the lzma module. Your installed Python is incomplete. Attempting to use lzma compression will result in a RuntimeError.
  warnings.warn(msg)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="WebCamera" class="doc_header"><code>class</code> <code>WebCamera</code><a href="https://github.com/openhsi/openhsi/tree/master/openhsi/cameras.py#L22" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>WebCamera</code>(<strong><code>mode</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>n_lines</code></strong>:<code>int</code>=<em><code>16</code></em>, <strong><code>processing_lvl</code></strong>:<code>int</code>=<em><code>2</code></em>, <strong><code>json_path</code></strong>:<code>str</code>=<em><code>'assets/cam_settings.json'</code></em>, <strong><code>pkl_path</code></strong>:<code>str</code>=<em><code>'assets/cam_calibration.pkl'</code></em>, <strong><code>print_settings</code></strong>=<em><code>False</code></em>) :: <a href="/openhsi/capture.html#OpenHSI"><code>OpenHSI</code></a></p>
</blockquote>
<p>Interface for webcam to test OpenHSI functionality</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">WebCamera</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;HgAr&quot;</span><span class="p">,</span> <span class="n">n_lines</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">processing_lvl</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">cam</span><span class="p">:</span>
    <span class="n">cam</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">cam</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">hist_eq</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
<span class="n">fig</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">cam</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span><span class="mi">1</span><span class="p">,:],</span><span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span>
           <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="n">cam</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;index2wavelength_range&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">cam</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;index2wavelength_range&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="n">cam</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
          <span class="n">aspect</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="XIMEA-Camera">XIMEA Camera<a class="anchor-link" href="#XIMEA-Camera"> </a></h2><p>Used for the OpenHSI Camera Mark I.</p>
<p>Make sure you install the Ximea API beforehand in the instructions <a href="https://www.ximea.com/support/wiki/apis/Python">https://www.ximea.com/support/wiki/apis/Python</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="XimeaCamera" class="doc_header"><code>class</code> <code>XimeaCamera</code><a href="https://github.com/openhsi/openhsi/tree/master/openhsi/cameras.py#L76" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>XimeaCamera</code>(<strong><code>xbinwidth</code></strong>:<code>int</code>=<em><code>896</code></em>, <strong><code>xbinoffset</code></strong>:<code>int</code>=<em><code>528</code></em>, <strong><code>exposure_ms</code></strong>:<code>float</code>=<em><code>10</code></em>, <strong><code>serial_num</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>n_lines</code></strong>:<code>int</code>=<em><code>16</code></em>, <strong><code>processing_lvl</code></strong>:<code>int</code>=<em><code>2</code></em>, <strong><code>json_path</code></strong>:<code>str</code>=<em><code>'assets/cam_settings.json'</code></em>, <strong><code>pkl_path</code></strong>:<code>str</code>=<em><code>'assets/cam_calibration.pkl'</code></em>, <strong><code>print_settings</code></strong>=<em><code>False</code></em>) :: <a href="/openhsi/capture.html#OpenHSI"><code>OpenHSI</code></a></p>
</blockquote>
<p>Core functionality for Ximea cameras</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">run_ximea</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">XimeaCamera</span><span class="p">(</span><span class="n">n_lines</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">processing_lvl</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">pkl_path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">json_path</span><span class="o">=</span><span class="s1">&#39;assets/cam_settings_ximea.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cam</span><span class="p">:</span>
        <span class="n">cam</span><span class="o">.</span><span class="n">start_cam</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">cam</span><span class="o">.</span><span class="n">n_lines</span><span class="p">)):</span>
            <span class="n">cam</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">cam</span><span class="o">.</span><span class="n">get_img</span><span class="p">())</span>
        <span class="n">cam</span><span class="o">.</span><span class="n">stop_cam</span><span class="p">()</span>

<span class="o">%</span><span class="k">prun</span> run_ximea()
    <span class="c1">#fig = cam.show(robust=True)</span>
    
<span class="c1">#fig</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Lucid-Vision-Labs-Camera">Lucid Vision Labs Camera<a class="anchor-link" href="#Lucid-Vision-Labs-Camera"> </a></h2><p>Used for the OpenHSI Camera from Sydney Photonics.</p>
<p>Make sure you installthe Lucid Vision Labs Arena SDK and python api beforehand. These can be found here <a href="https://thinklucid.com/downloads-hub/">https://thinklucid.com/downloads-hub/</a></p>
<p>Any keyword-value pair arguments must match the those avaliable in settings file. camera specfic ones are:</p>

<pre><code>    binxy: number of pixels to bin in (x,y) direction
    win_resolution: size of area on detector to readout (width, height)
    win_offset: offsets (x,y) from edge of detector for a selective 
    exposure_ms: is the camera exposure time to use
    pixel_format: format of pixels readout sensor, ie Mono8, Mono10, Mono10p, Mono10Packed, Mono12, Mono12p, Mono12Packed, Mono16
    mac_addr: str = "1c:0f:af:01:7b:a0",</code></pre>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="LucidCamera" class="doc_header"><code>class</code> <code>LucidCamera</code><a href="https://github.com/openhsi/openhsi/tree/master/openhsi/cameras.py#L140" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>LucidCamera</code>(<strong><code>n_lines</code></strong>:<code>int</code>=<em><code>16</code></em>, <strong><code>processing_lvl</code></strong>:<code>int</code>=<em><code>2</code></em>, <strong><code>json_path</code></strong>:<code>str</code>=<em><code>'assets/cam_settings.json'</code></em>, <strong><code>pkl_path</code></strong>:<code>str</code>=<em><code>'assets/cam_calibration.pkl'</code></em>, <strong><code>print_settings</code></strong>=<em><code>False</code></em>) :: <a href="/openhsi/capture.html#OpenHSI"><code>OpenHSI</code></a></p>
</blockquote>
<p>Core functionality for Lucid Vision Lab cameras</p>
<p>Any keyword-value pair arguments must match the those avaliable in settings file. camera specfic ones are:</p>
<p>binxy: number of pixels to bin in (x,y) direction
win_resolution: size of area on detector to readout (width, height)
win_offset: offsets (x,y) from edge of detector for a selective
exposure_ms: is the camera exposure time to use
pixel_format: format of pixels readout sensor, ie Mono8, Mono10, Mono10p, Mono10Packed, Mono12, Mono12p, Mono12Packed, Mono16
mac_addr: str = "1c:0f:af:01:7b:a0",</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">LucidCamera</span><span class="p">(</span><span class="n">n_lines</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">processing_lvl</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">pkl_path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">json_path</span><span class="o">=</span><span class="s2">&quot;assets/cam_settings_lucid.json&quot;</span><span class="p">,</span><span class="n">binxy</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span><span class="n">resolution</span><span class="o">=</span><span class="p">[</span><span class="mi">540</span><span class="p">,</span><span class="mi">720</span><span class="p">])</span> <span class="k">as</span> <span class="n">cam</span><span class="p">:</span>
    <span class="n">cam</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Camera temp: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cam</span><span class="o">.</span><span class="n">get_temp</span><span class="p">()))</span>
    <span class="c1">#fig = cam.show(robust=True)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Setting File Override: binxy = [2, 2]
Setting File Override: resolution = [540, 720]
{&#39;mac&#39;: &#39;1c:0f:af:01:7b:a0&#39;}
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>100%|██████████| 10/10 [00:00&lt;00:00, 26.93it/s]
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Camera temp: 63.0
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

